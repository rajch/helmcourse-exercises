apiVersion: v1
kind: Pod
metadata:
  name: {{ .Release.Name }}-mysql-tester
  labels:
{{ include "mysql.labels" . | indent 4 }}
  annotations:
    helm.sh/hook: test
    helm.sh/hook-delete-policy: before-hook-creation,hook-succeeded
spec:
  containers:
    - name: testc1
      image: mysql:5.7
      args:
        - "mysql"
        - "-h{{ .Release.Name}}-mysql-svc"
        - "-uroot"
        - "-p{{ .Values.password }}"
  restartPolicy: Never